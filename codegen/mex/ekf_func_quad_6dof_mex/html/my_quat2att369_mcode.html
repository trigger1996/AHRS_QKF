<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="91,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T4U3">roll</span>, <span class="var type1" id="S3T4U4">pitch</span>, <span class="var type1" id="S4T4U5">yaw</span>] = my_quat2att(<span class="var type1" id="S5T49U8">q</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="91,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,3" id="srcline3"> 3</a></span><span class="line">    <span class="mxinfo " id="T4:U5"><span class="var type1" id="S6T4U11">q11</span> = <span class="mxinfo " id="T4:U7"><span class="mxinfo " id="T4:U8"><span class="var type1" id="S5T49U14">q</span>(<span class="mxinfo " id="T4:U10">1</span>)</span>*<span class="mxinfo " id="T4:U11"><span class="var type1" id="S5T49U17">q</span>(<span class="mxinfo " id="T4:U13">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,4" id="srcline4"> 4</a></span><span class="line">    <span class="mxinfo " id="T4:U14"><span class="var type1" id="S7T4U21">q12</span> = <span class="mxinfo " id="T4:U16"><span class="mxinfo " id="T4:U17"><span class="var type1" id="S5T49U24">q</span>(<span class="mxinfo " id="T4:U19">1</span>)</span>*<span class="mxinfo " id="T4:U20"><span class="var type1" id="S5T49U27">q</span>(<span class="mxinfo " id="T4:U22">2</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,5" id="srcline5"> 5</a></span><span class="line">    <span class="mxinfo " id="T4:U23"><span class="var type1" id="S8T4U31">q13</span> = <span class="mxinfo " id="T4:U25"><span class="mxinfo " id="T4:U26"><span class="var type1" id="S5T49U34">q</span>(<span class="mxinfo " id="T4:U28">1</span>)</span>*<span class="mxinfo " id="T4:U29"><span class="var type1" id="S5T49U37">q</span>(<span class="mxinfo " id="T4:U31">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,6" id="srcline6"> 6</a></span><span class="line">    <span class="mxinfo " id="T4:U32"><span class="var type1" id="S9T4U41">q14</span> = <span class="mxinfo " id="T4:U34"><span class="mxinfo " id="T4:U35"><span class="var type1" id="S5T49U44">q</span>(<span class="mxinfo " id="T4:U37">1</span>)</span>*<span class="mxinfo " id="T4:U38"><span class="var type1" id="S5T49U47">q</span>(<span class="mxinfo " id="T4:U40">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,7" id="srcline7"> 7</a></span><span class="line">    <span class="mxinfo " id="T4:U41"><span class="var type1" id="S10T4U51">q22</span> = <span class="mxinfo " id="T4:U43"><span class="mxinfo " id="T4:U44"><span class="var type1" id="S5T49U54">q</span>(<span class="mxinfo " id="T4:U46">2</span>)</span>*<span class="mxinfo " id="T4:U47"><span class="var type1" id="S5T49U57">q</span>(<span class="mxinfo " id="T4:U49">2</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,8" id="srcline8"> 8</a></span><span class="line">    <span class="mxinfo " id="T4:U50"><span class="var type1" id="S11T4U61">q23</span> = <span class="mxinfo " id="T4:U52"><span class="mxinfo " id="T4:U53"><span class="var type1" id="S5T49U64">q</span>(<span class="mxinfo " id="T4:U55">2</span>)</span>*<span class="mxinfo " id="T4:U56"><span class="var type1" id="S5T49U67">q</span>(<span class="mxinfo " id="T4:U58">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,9" id="srcline9"> 9</a></span><span class="line">    <span class="mxinfo " id="T4:U59"><span class="var type1" id="S12T4U71">q24</span> = <span class="mxinfo " id="T4:U61"><span class="mxinfo " id="T4:U62"><span class="var type1" id="S5T49U74">q</span>(<span class="mxinfo " id="T4:U64">2</span>)</span>*<span class="mxinfo " id="T4:U65"><span class="var type1" id="S5T49U77">q</span>(<span class="mxinfo " id="T4:U67">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T4:U68"><span class="var type1" id="S13T4U81">q33</span> = <span class="mxinfo " id="T4:U70"><span class="mxinfo " id="T4:U71"><span class="var type1" id="S5T49U84">q</span>(<span class="mxinfo " id="T4:U73">3</span>)</span>*<span class="mxinfo " id="T4:U74"><span class="var type1" id="S5T49U87">q</span>(<span class="mxinfo " id="T4:U76">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo " id="T4:U77"><span class="var type1" id="S14T4U91">q34</span> = <span class="mxinfo " id="T4:U79"><span class="mxinfo " id="T4:U80"><span class="var type1" id="S5T49U94">q</span>(<span class="mxinfo " id="T4:U82">3</span>)</span>*<span class="mxinfo " id="T4:U83"><span class="var type1" id="S5T49U97">q</span>(<span class="mxinfo " id="T4:U85">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,12" id="srcline12">12</a></span><span class="line">    <span class="mxinfo " id="T4:U86"><span class="var type1" id="S15T4U101">q44</span> = <span class="mxinfo " id="T4:U88"><span class="mxinfo " id="T4:U89"><span class="var type1" id="S5T49U104">q</span>(<span class="mxinfo " id="T4:U91">4</span>)</span>*<span class="mxinfo " id="T4:U92"><span class="var type1" id="S5T49U107">q</span>(<span class="mxinfo " id="T4:U94">4</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,13" id="srcline13">13</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="91,14" id="srcline14">14</a></span><span class="line">    <span class="mxinfo " id="T4:U95"><span class="var type1" id="S2T4U111">roll</span> = <span class="mxinfo " id="T4:U97">atan2(<span class="mxinfo " id="T4:U98"><span class="mxinfo " id="T4:U99">2</span>*(<span class="mxinfo " id="T4:U100"><span class="var type1" id="S7T4U118">q12</span>+<span class="var type1" id="S14T4U119">q34</span></span>)</span>,<span class="mxinfo " id="T4:U103"><span class="mxinfo " id="T4:U104"><span class="mxinfo " id="T4:U105"><span class="var type1" id="S6T4U123">q11</span>-<span class="var type1" id="S10T4U124">q22</span></span>-<span class="var type1" id="S13T4U125">q33</span></span>+<span class="var type1" id="S15T4U126">q44</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T4:U110"><span class="var type1" id="S3T4U129">pitch</span> = <span class="mxinfo " id="T4:U112"><span class="potentialdiff PD1">asin(<span class="mxinfo " id="T4:U113"><span class="mxinfo " id="T4:U114">2</span>*(<span class="mxinfo " id="T4:U115"><span class="var type1" id="S8T4U136">q13</span> - <span class="var type1" id="S12T4U137">q24</span></span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,16" id="srcline16">16</a></span><span class="line">    <span class="mxinfo " id="T4:U118"><span class="var type1" id="S4T4U140">yaw</span> = <span class="mxinfo " id="T4:U120">atan2(<span class="mxinfo " id="T4:U121"><span class="mxinfo " id="T4:U122">2</span>*(<span class="mxinfo " id="T4:U123"><span class="var type1" id="S11T4U147">q23</span>+<span class="var type1" id="S9T4U148">q14</span></span>)</span>,<span class="mxinfo " id="T4:U126"><span class="mxinfo " id="T4:U127"><span class="mxinfo " id="T4:U128"><span class="var type1" id="S6T4U152">q11</span>+<span class="var type1" id="S10T4U153">q22</span></span>-<span class="var type1" id="S13T4U154">q33</span></span>-<span class="var type1" id="S15T4U155">q44</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,18" id="srcline18">18</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
